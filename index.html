<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sumativa S3</title>
    <script defer src="app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav style="display: flex; justify-content: center;">
        <p style="font-size: 1.5em; margin: 0.25em; overflow: hidden;">🏥🥼💉⚕️🩹💊🩼🩺🏥🥼💉⚕️🩹💊🩼🩺🏥🥼💉⚕️🩹💊🩼🩺
        </p>
    </nav>
    <main>
        <h1>
            Nueva ficha médica 📇
        </h1>
        <!-- Formulario -->
        <div class="form">
            <div class="form__body">
                <label class="field" for="rut">RUT:
                    <div class="field__detail">
                        <input type="text" id="rut" name="rut" placeholder="12.345.678-9" onblur="validarRut()"
                            onkeyup="validarRut()">
                        <span id="errorRut" class="error"></span>
                    </div>
                </label>
                <label class="field" for="nombre">Nombres:
                    <div class="field__detail">
                        <input type="text" id="nombre" name="nombre"
                            onblur="validarCampoTexto('nombre', 'errorNombre', 'Por favor, ingrese su nombre.')"
                            onkeyup="validarCampoTexto('nombre', 'errorNombre', 'Por favor, ingrese su nombre.')">
                        <span id="errorNombre" class="error"></span>
                    </div>
                </label>
                <label class="field" for="apellido">Apellidos:
                    <div class="field__detail">
                        <input type="text" id="apellido" name="apellido"
                            onblur="validarCampoTexto('apellido', 'errorApellido', 'Por favor, ingrese su apellido.')"
                            onkeyup="validarCampoTexto('apellido', 'errorApellido', 'Por favor, ingrese su apellido.')">
                        <span id="errorApellido" class="error"></span>
                    </div>
                </label>
                <label class="field" for="direccion">Dirección:
                    <div class="field__detail">
                        <input type="text" id="direccion" name="direccion"
                            onblur="validarCampoTexto('direccion', 'errorDireccion', 'Por favor, ingrese su dirección.')"
                            onkeyup="validarCampoTexto('direccion', 'errorDireccion', 'Por favor, ingrese su dirección.')">
                        <span id="errorDireccion" class="error"></span>
                    </div>
                </label>
                <label class="field" for="ciudad">Ciudad:
                    <div class="field__detail">
                        <input type="text" id="ciudad" name="ciudad"
                            onblur="validarCampoTexto('ciudad', 'errorCiudad', 'Por favor, ingrese su ciudad.')"
                            onkeyup="validarCampoTexto('ciudad', 'errorCiudad', 'Por favor, ingrese su ciudad.')">
                        <span id="errorCiudad" class="error"></span>
                    </div>
                </label>
                <label class="field" for="telefono">Teléfono:
                    <div class="field__detail">
                        <input type="text" id="telefono" name="telefono" onblur="validarTelefono()"
                            onkeyup="validarTelefono()">
                        <span id="errorTelefono" class="error"></span>
                    </div>
                </label>
                <label class="field" for="email">Email:
                    <div class="field__detail">
                        <input type="email" id="email" name="email" onblur="validarEmail()" onkeyup="validarEmail()">
                        <span id="errorEmail" class="error"></span>
                    </div>
                </label>
                <label class="field" for="fechaNacimiento">Fecha de Nacimiento:
                    <div class="field__detail">
                        <input type="date" id="fechaNacimiento" name="fechaNacimiento" onblur="validarFechaNacimiento()"
                            onkeyup="validarFechaNacimiento()">
                        <span id="errorFechaNacimiento" class="error"></span>
                    </div>
                </label>
                <label class="field" for="estadoCivil">Estado Civil:
                    <div class="field__detail">
                        <select id="estadoCivil" name="estadoCivil" onchange="validarEstadoCivil()">
                            <option value="">Seleccione...</option>
                            <option value="soltero">Soltero</option>
                            <option value="casado">Casado</option>
                            <option value="divorciado">Divorciado</option>
                            <option value="viudo">Viudo</option>
                        </select>
                        <span id="errorEstadoCivil" class="error"></span>
                    </div>
                </label>
                <label class="field" for="comentario">
                    Comentarios
                    <div class="field__detail">
                        <input type="text" id="comentario" name="comentario"
                            onblur="validarCampoTexto('comentario', 'errorComentario', 'Por favor, ingrese un comentario.')"
                            onkeyup="validarCampoTexto('comentario', 'errorComentario', 'Por favor, ingrese un comentario.')">
                        <span id="errorComentario" class="error"></span>
                    </div>
                </label>
                <div style="display: flex; justify-content: space-evenly; margin: 2em;">
                    <button onclick="limpiarFormulario()" class="btn_clean">Limpiar</button>
                    <button id="botonenviar" onclick="registrarFicha()" class="btn_inactive" style="width: 50%;">
                        Guardar
                    </button>
                </div>
            </div>
        </div>
        <!-- Modal sobreescribir -->
        <div id="modalSobre" class="noshow_modal">
            <div style="width: 300px; background-color: white; border-radius: 1em; box-shadow: 1px 1px 9px #807d7f;">
                <div style="width: 100%; text-align: end;">
                    <p style="margin: 1em; cursor: pointer;" onclick="cancelaAccionSobreescribir()">❌</p>
                </div>
                <div>Usuario ya existe. ¿Desea sobreescribir?</div>
                <div style="margin: 2em 0; width: 100%; display: flex; justify-content: space-evenly;">
                    <button onclick="cancelaAccionSobreescribir()" style="padding: 0.5em 3em;
                    border-radius: 1em;
                    border: none;
                    background-color: #f71f69;
                    color: white;
                    font-weight: bold;">No</button>
                    <button onclick="sobreescribirFicha()" style="padding: 0.5em 3em;
                    border-radius: 1em;
                    border: none;
                    background-color: #32caca;
                    color: white;
                    font-weight: bold;">Si</button>
                </div>
            </div>
        </div>
        <!-- Modal registro exitoso -->
        <div id="modalExito" class="noshow_modal">
            <div style="width: 300px; background-color: white; border-radius: 1em; box-shadow: 1px 1px 9px #807d7f; padding: 1em;">
                <div style="width: 100%; text-align: end;">
                    <p style="margin: 1em; cursor: pointer;" onclick="cierraModalExito()">❌</p>
                </div>
                <p >Usuario registrado exitosamente ✅.</p>
                <p style="font-size: 0.75em;">Este mensaje se cerrará en 3 segundos...</p>
            </div>
        </div>
        <hr style="border: 1px solid #32caca; width: 50%;">
        <!-- Buscador pacientes -->
        <div>
            <div>
                <h2>Buscador pacientes registrados</h2>
                <div>
                    Ingrese su búsqueda: <input type="text" name="" id="" onkeyup="buscarPersona(value)">
                </div>
            </div>
            <div>
                <h4>Coincidencias búsqueda:</h4>
                <div style="display: flex; justify-content: center;">
                    <div id="listaEncontrados" style="width: 320px; text-align: start;">
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer style="padding: 1em; background-color: #32caca; color: white;">
        powered by code 🤖
    </footer>

</body>

</html>